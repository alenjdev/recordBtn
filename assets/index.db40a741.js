import{j as f,r as i,A as m,B as p,a as g,F as y,R as h,b as v,c as S}from"./vendor.9671edae.js";const x=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=o(e);fetch(e.href,r)}};x();const a=f.exports.jsx,A=({device:n})=>{const[t,o]=i.exports.useState(),[s,e]=i.exports.useState(!1);i.exports.useEffect(()=>{m.addModuleDataListener(r)},[n]);const r=async u=>{const l=D(u);if(l===void 0)return;let d=l.values[0];e(!s),t!==d&&(o(l.values[0]),console.log(t))};return a("div",{children:a(p,{disabled:s,onClick:async()=>{!n||(n.sendCommand("switch_polygon_record",t?"STOP":"START"),e(!0),setTimeout(()=>{e(!1)},2e4))},type:"primary",size:"large",children:t?"STOP Polygon record":"START Polygon record"})})};function D(n){const t=Object.values(n.streams);if(t.length===0)return"No streams.";const o=t[0];if(o===void 0)return"No stream.";if(o.loading)return;if(o.tooMuchData)return"Too much data.";if(o.data.length===0)return"No data.";const s=o.data[0].points.at(-1);return s?s[1]:"No datapoints."}const T=()=>{const[n,t]=i.exports.useState();i.exports.useEffect(()=>{o()},[]);const o=async()=>{if(await g.waitTilAuthenticated()){const s=await y.getCurrentDevice();t(s)}};return a("div",{className:"App",children:a(A,{device:n})})};h.render(a(v,{type:"module",children:a(S.StrictMode,{children:a(T,{})})}),document.getElementById("root"));
