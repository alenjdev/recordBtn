import{j as u,r as i,A as m,a as f,F as p,R as _,b}from"./vendor.44d28084.js";const y=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}};y();const h="_btn_dls0e_1";var l={btn:h,"btn-xs":"_btn-xs_dls0e_10","btn-small":"_btn-small_dls0e_15","btn-medium":"_btn-medium_dls0e_20","btn-large":"_btn-large_dls0e_27","btn-primary":"_btn-primary_dls0e_35","btn-secondary":"_btn-secondary_dls0e_39","btn-tertiary":"_btn-tertiary_dls0e_43","btn-exit":"_btn-exit_dls0e_47"};const a=u.exports.jsx,g=({onClick:o,className:t,children:r,size:s,type:e})=>a("button",{onClick:o,className:`
      ${l.btn} 
      ${l[`btn-${s}`]} 
      ${l[`btn-${e}`]} 
      ${t}`,children:r}),d=({device:o,command:t,label:r,params:s})=>a("div",{children:a(g,{onClick:async()=>{!o||o.sendCommand(t,s)},type:"primary",size:"large",children:r})}),v=({device:o})=>{const[t,r]=i.exports.useState();i.exports.useLayoutEffect(()=>{m.addModuleDataListener(s)},[o]);const s=async e=>{const n=w(e);n!==void 0&&t!==n.values[0]&&r(n.values[0])};return a("div",{children:t?a(d,{device:o,label:"STOP Polygon record",command:"switch_polygon_record",params:"STOP"}):a(d,{device:o,label:"START Polygon record",command:"switch_polygon_record",params:"START"})})};function w(o){const t=Object.values(o.streams);if(t.length===0)throw new Error("No streams.");const r=t[0];if(r===void 0)throw new Error("No stream.");if(r.loading)return;if(r.tooMuchData)throw new Error("Too much data.");if(r.data.length===0)throw new Error("No data.");const s=r.data[0].points.at(-1);if(!s)throw new Error("No datapoints.");return s[1]}const x=()=>{const[o,t]=i.exports.useState();i.exports.useEffect(()=>{r()},[]);const r=async()=>{if(await f.waitTilAuthenticated()){const s=await p.getCurrentDevice();t(s)}};return a("div",{className:"App",children:a(v,{device:o})})};_.render(a(b.StrictMode,{children:a(x,{})}),document.getElementById("root"));
